<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barber Syst√©m</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            gold: '#b9925f',
                            gray: '#90908f',
                            dark: '#150d07',
                            brown: '#46342b',
                            light: '#f4ece4'
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { background-color: #f4ece4; font-family: ui-sans-serif, system-ui, sans-serif; }
        .animate-fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, doc, setDoc, deleteDoc, addDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

        const { useState, useEffect, useMemo } = React;

        const firebaseConfig = {
            apiKey: "AIzaSyBf8IfMax0l5uvl9VdertYcK5ruVPBSvuE",
            authDomain: "barber-tabulky.firebaseapp.com",
            projectId: "barber-tabulky",
            storageBucket: "barber-tabulky.firebasestorage.app",
            messagingSenderId: "165152546039",
            appId: "1:165152546039:web:19b8a86e8e215c883cc7f2",
            measurementId: "G-PQ32GEK6QV"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const PASSWORDS = {
            'Admin (Majitel)': 'Wm1yemxpbmE2OQ==',
            'Kade≈ôn√≠k 1': 'QmFyYmVyMDE=',
            'Kade≈ôn√≠k 2': 'QmFyYmVyMDI=',
            '√öƒçetn√≠': 'VWN0bzEyMzQ='
        };

        const SERVICES = [
            { name: 'Klasick√Ω st≈ôih', price: 520 },
            { name: 'St≈ôih strojkem', price: 470 },
            { name: 'Klasick√Ω st≈ôih a √∫prava vous≈Ø hot towel', price: 995 },
            { name: 'Klasick√Ω st≈ôih a √∫prava vous≈Ø strojkem', price: 950 },
            { name: '√öprava vous≈Ø metodou hot towel', price: 490 },
            { name: '√öprava vous≈Ø pouze strojkem', price: 460 },
            { name: 'St≈ôih junior (do 8 let)', price: 420 },
            { name: 'Tradiƒçn√≠ holen√≠', price: 520 },
            { name: 'Holen√≠ hlavy', price: 520 },
            { name: 'St≈ôih dlouh√Ωch vlas≈Ø', price: 895 },
            { name: 'St≈ôih strojkem a √∫prava vous≈Ø strojkem', price: 900 },
            { name: 'St≈ôih strojkem a √∫prava vous≈Ø hot towel', price: 965 },
            { name: 'Depilace chloupk≈Ø z nosu a u≈°√≠', price: 100 },
            { name: 'Barven√≠ vous≈Ø', price: 550 },
            { name: 'ƒåern√° maska', price: 150 },
            { name: 'Barven√≠ kontur', price: 300 },
            { name: 'Kompletn√≠ √∫prava', price: 1695 }
        ];

        const PAYMENTS = ['HOTOVOST', 'QR', 'POUKAZ'];
        const ROLES = ['Admin (Majitel)', 'Kade≈ôn√≠k 1', 'Kade≈ôn√≠k 2', '√öƒçetn√≠'];

        function App() {
            const [user, setUser] = useState(null);
            const [records, setRecords] = useState([]);
            const [settings, setSettings] = useState({});
            const [activeRole, setActiveRole] = useState('');
            
            const today = new Date();
            const currentMonthStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}`;
            const [selectedMonth, setSelectedMonth] = useState(currentMonthStr);
            
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editingId, setEditingId] = useState(null);
            const [formData, setFormData] = useState({
                date: '',
                time: '',
                service: SERVICES[0].name,
                price: SERVICES[0].price,
                payment: PAYMENTS[0],
                voucherCode: '',
                notes: '',
                barber: 'Kade≈ôn√≠k 1'
            });

            const [isAppUnlocked, setIsAppUnlocked] = useState(false);
            const [selectedLoginRole, setSelectedLoginRole] = useState('Kade≈ôn√≠k 1');
            const [pinInput, setPinInput] = useState('');
            const [loginError, setLoginError] = useState('');

            useEffect(() => {
                signInAnonymously(auth).catch(() => {});
                const unsubscribe = onAuthStateChanged(auth, setUser);
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!user) return;

                const recordsRef = collection(db, 'barber_records');
                const unsubRecords = onSnapshot(recordsRef, (snapshot) => {
                    const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    data.sort((a, b) => new Date(`${a.date}T${a.time}`) - new Date(`${b.date}T${b.time}`));
                    setRecords(data);
                });

                const settingsRef = collection(db, 'barber_settings');
                const unsubSettings = onSnapshot(settingsRef, (snapshot) => {
                    const data = {};
                    snapshot.docs.forEach(doc => { data[doc.id] = doc.data(); });
                    setSettings(data);
                });

                return () => { unsubRecords(); unsubSettings(); };
            }, [user]);

            const isBarber = activeRole.includes('Kade≈ôn√≠k');
            const isAdmin = activeRole === 'Admin (Majitel)';
            const isMonthLocked = settings[selectedMonth]?.locked === true;

            useEffect(() => {
                if (isBarber && selectedMonth !== currentMonthStr) {
                    setSelectedMonth(currentMonthStr);
                }
            }, [isBarber, selectedMonth, currentMonthStr]);

            const handleEasyLogin = (e) => {
                e.preventDefault();
                setLoginError('');

                if (btoa(pinInput) !== PASSWORDS[selectedLoginRole]) {
                    setLoginError('Nespr√°vn√© heslo!'); 
                    return;
                }

                setActiveRole(selectedLoginRole);
                setIsAppUnlocked(true);
            };

            const filteredRecords = useMemo(() => {
                if (isBarber && isMonthLocked) return [];
                return records.filter(record => record.date.substring(0, 7) === selectedMonth);
            }, [records, selectedMonth, isMonthLocked, isBarber]);

            const totals = useMemo(() => {
                return filteredRecords.reduce((acc, curr) => {
                    acc.total += Number(curr.price) || 0;
                    if (curr.payment === 'HOTOVOST') acc.cash += Number(curr.price) || 0;
                    if (curr.payment === 'QR') acc.qr += Number(curr.price) || 0;
                    if (curr.payment === 'POUKAZ') acc.voucher += Number(curr.price) || 0;
                    acc.count += 1;
                    return acc;
                }, { total: 0, cash: 0, qr: 0, voucher: 0, count: 0 });
            }, [filteredRecords]);

            const handleServiceChange = (e) => {
                const serviceName = e.target.value;
                const service = SERVICES.find(s => s.name === serviceName);
                setFormData({ ...formData, service: serviceName, price: service.price });
            };

            const openEditModal = (record) => {
                setFormData({
                    date: record.date,
                    time: record.time,
                    service: record.service,
                    price: record.price,
                    payment: record.payment,
                    voucherCode: record.voucherCode || '',
                    notes: record.notes || '',
                    barber: record.barber
                });
                setEditingId(record.id);
                setIsModalOpen(true);
            };

            const closeModal = () => {
                setIsModalOpen(false);
                setEditingId(null);
                setFormData({
                    date: '', time: '', service: SERVICES[0].name, price: SERVICES[0].price, 
                    payment: PAYMENTS[0], voucherCode: '', notes: '', 
                    barber: activeRole.includes('Kade≈ôn√≠k') ? activeRole : 'Kade≈ôn√≠k 1'
                });
            };

            const handleSaveRecord = async (e) => {
                e.preventDefault();
                if (!user) return;
                if (formData.payment === 'POUKAZ' && !formData.voucherCode.trim()) {
                    alert("P≈ôi platbƒõ poukazem je nutn√© zadat ƒç√≠slo poukazu!"); return;
                }
                
                try {
                    if (editingId) {
                        await updateDoc(doc(db, 'barber_records', editingId), { ...formData, updatedBy: activeRole, updatedAt: new Date().toISOString() });
                    } else {
                        await addDoc(collection(db, 'barber_records'), { ...formData, createdAt: new Date().toISOString(), addedBy: activeRole });
                    }
                    closeModal();
                } catch (error) {}
            };

            const handleDelete = async (id) => {
                if (!user) return;
                if (window.confirm("Opravdu smazat tento z√°znam? Tuto akci nelze vr√°tit.")) {
                    await deleteDoc(doc(db, 'barber_records', id));
                }
            };

            const toggleLockMonth = async () => {
                if (!user || !isAdmin) return;
                await setDoc(doc(db, 'barber_settings', selectedMonth), { locked: !isMonthLocked }, { merge: true });
            };

            const formatDate = (dateString) => {
                if (!dateString) return '';
                const [year, month, day] = dateString.split('-');
                return `${day}.${month}.${year}`;
            };

            if (!isAppUnlocked) {
                return (
                    <div className="min-h-screen flex items-center justify-center bg-brand-light py-12 px-4 sm:px-6 lg:px-8">
                        <div className="max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-md border border-gray-100">
                            <div className="text-center flex flex-col items-center">
                                <img src="https://jebley-barber.cz/images/logo.png" alt="Jebley Barber" className="h-20 mb-4 bg-brand-dark rounded-xl p-3" />
                                <h2 className="text-3xl font-extrabold text-brand-dark">Vstup do syst√©mu</h2>
                                <p className="mt-2 text-brand-gray">Vyberte, kdo zrovna pracuje</p>
                            </div>
                            <form className="mt-8 space-y-6" onSubmit={handleEasyLogin}>
                                <div>
                                    <label className="block text-sm font-medium text-brand-brown mb-2">Va≈°e role</label>
                                    <select value={selectedLoginRole} onChange={(e) => { setSelectedLoginRole(e.target.value); setPinInput(''); setLoginError(''); }} className="w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:ring-brand-gold focus:border-brand-gold text-lg font-medium">
                                        {ROLES.map(r => <option key={r} value={r}>{r}</option>)}
                                    </select>
                                </div>
                                <div className="animate-fade-in">
                                    <label className="block text-sm font-medium text-brand-brown mb-2">Heslo</label>
                                    <input type="password" required className="w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:ring-brand-gold focus:border-brand-gold text-center text-xl tracking-widest" placeholder="Zadejte heslo" value={pinInput} onChange={(e) => setPinInput(e.target.value)} />
                                </div>
                                {loginError && <p className="text-red-600 text-sm text-center font-medium bg-red-50 py-2 rounded">{loginError}</p>}
                                <button type="submit" className="w-full flex justify-center py-3 px-4 border border-transparent text-lg font-bold rounded-md text-white bg-brand-gold hover:opacity-90 focus:outline-none shadow-md transition-all">
                                    Vstoupit do aplikace
                                </button>
                            </form>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-brand-light text-brand-dark font-sans pb-12">
                    <header className="bg-brand-dark text-white shadow-md">
                        <div className="max-w-[1600px] mx-auto px-4 py-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row justify-between items-center gap-4">
                            <div className="flex items-center gap-3">
                                <img src="https://jebley-barber.cz/images/logo.png" alt="Jebley Barber" className="h-10 object-contain" />
                            </div>
                            <div className="flex items-center gap-4 bg-brand-brown p-2 rounded-lg">
                                <span className="text-xs text-brand-light uppercase tracking-wider opacity-80">P≈ôihl√°≈°en jako:</span>
                                <span className="text-brand-gold font-bold">{activeRole}</span>
                                <div className="h-4 w-px bg-brand-light opacity-20 mx-2"></div>
                                <button onClick={() => {setIsAppUnlocked(false); setPinInput('');}} className="text-sm text-brand-light hover:text-white underline font-medium">Odhl√°sit</button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-[1600px] mx-auto px-4 py-8 sm:px-6 lg:px-8">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-200">
                            <div className="flex items-center gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-brand-gray mb-1">Vyberte mƒõs√≠c</label>
                                    <input 
                                        type="month" 
                                        value={selectedMonth} 
                                        onChange={(e) => setSelectedMonth(e.target.value)} 
                                        disabled={isBarber}
                                        className={`block w-full rounded-md border-gray-300 py-2 px-3 text-base sm:text-sm font-semibold border ${isBarber ? 'bg-gray-100 text-brand-gray cursor-not-allowed' : 'bg-white focus:border-brand-gold focus:ring-brand-gold cursor-pointer'}`} 
                                    />
                                    {isBarber && <p className="text-xs text-brand-gold mt-1">Dostupn√Ω pouze aktu√°ln√≠ mƒõs√≠c</p>}
                                </div>
                                {isAdmin && (
                                    <div className="mt-6">
                                        <button onClick={toggleLockMonth} className={`flex items-center gap-2 px-4 py-2 rounded-md font-medium text-sm transition-colors shadow-sm ${isMonthLocked ? 'bg-red-100 text-red-800 hover:bg-red-200 border border-red-200' : 'bg-green-100 text-green-800 hover:bg-green-200 border border-green-200'}`}>
                                            {isMonthLocked ? 'üîí Mƒõs√≠c Uzamƒçen (Odemknout)' : 'üîì Mƒõs√≠c Otev≈ôen (Zamknout)'}
                                        </button>
                                    </div>
                                )}
                            </div>
                            {!activeRole.includes('√öƒçetn√≠') && !(isMonthLocked && !isAdmin) && (
                                <button onClick={() => {
                                    setFormData({ date: '', time: '', service: SERVICES[0].name, price: SERVICES[0].price, payment: PAYMENTS[0], voucherCode: '', notes: '', barber: activeRole.includes('Kade≈ôn√≠k') ? activeRole : 'Kade≈ôn√≠k 1' });
                                    setIsModalOpen(true);
                                }} className="bg-brand-gold text-white px-6 py-3 rounded-lg font-bold shadow-md transition-all hover:opacity-90 flex items-center gap-2 transform hover:scale-105">
                                    <span className="text-xl leading-none">+</span> Nov√Ω z√°kazn√≠k
                                </button>
                            )}
                        </div>

                        {isBarber && isMonthLocked ? (
                            <div className="bg-red-50 text-red-700 p-12 rounded-xl text-center border border-red-200 shadow-sm">
                                <div className="text-5xl mb-4">üîí</div>
                                <h2 className="text-3xl font-bold mb-2">Tento mƒõs√≠c je uzav≈ôen</h2>
                                <p className="text-lg">V√Ωkazy byly p≈ôed√°ny √∫ƒçetn√≠mu. Pro √∫pravy kontaktujte majitele.</p>
                            </div>
                        ) : (
                            <div className="flex flex-col lg:flex-row gap-8">
                                <div className="flex-1 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                                    <div className="overflow-x-auto">
                                        <table className="min-w-full divide-y divide-gray-200">
                                            <thead className="bg-brand-light">
                                                <tr>
                                                    <th className="px-6 py-4 text-left text-xs font-bold text-brand-brown uppercase tracking-wider">Datum a ƒåas</th>
                                                    <th className="px-4 py-4 text-left text-xs font-bold text-brand-brown uppercase tracking-wider">Kade≈ôn√≠k</th>
                                                    <th className="px-4 py-4 text-left text-xs font-bold text-brand-brown uppercase tracking-wider">Slu≈æba</th>
                                                    <th className="px-4 py-4 text-left text-xs font-bold text-brand-brown uppercase tracking-wider">Platba</th>
                                                    <th className="px-4 py-4 text-right text-xs font-bold text-brand-brown uppercase tracking-wider">Cena</th>
                                                    <th className="px-4 py-4 text-left text-xs font-bold text-brand-brown uppercase tracking-wider">Pozn√°mky</th>
                                                    <th className="px-6 py-4 text-right text-xs font-bold text-brand-brown uppercase tracking-wider">Akce</th>
                                                </tr>
                                            </thead>
                                            <tbody className="bg-white divide-y divide-gray-100">
                                                {filteredRecords.length === 0 ? (
                                                    <tr><td colSpan="7" className="px-6 py-16 text-center text-brand-gray text-lg">V tomto mƒõs√≠ci nejsou zat√≠m ≈æ√°dn√© z√°znamy.</td></tr>
                                                ) : (
                                                    filteredRecords.map((record) => (
                                                        <tr key={record.id} className="hover:bg-brand-light/50 transition-colors">
                                                            <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-brand-dark">{formatDate(record.date)} <span className="text-brand-gray ml-2">{record.time}</span></td>
                                                            <td className="px-4 py-4 whitespace-nowrap text-sm text-brand-brown font-medium">{record.barber}</td>
                                                            <td className="px-4 py-4 text-sm text-brand-dark break-words min-w-[200px] leading-relaxed">{record.service}</td>
                                                            <td className="px-4 py-4 whitespace-nowrap text-sm">
                                                                <span className={`px-3 py-1 inline-flex text-xs leading-5 font-bold rounded-full ${record.payment === 'HOTOVOST' ? 'bg-red-100 text-red-800' : ''} ${record.payment === 'KARTA' || record.payment === 'QR' ? 'bg-green-100 text-green-800' : ''} ${record.payment === 'POUKAZ' ? 'bg-purple-100 text-purple-800' : ''}`}>{record.payment}</span>
                                                            </td>
                                                            <td className="px-4 py-4 whitespace-nowrap text-sm font-bold text-brand-dark text-right text-lg">{record.price} Kƒç</td>
                                                            <td className="px-4 py-4 text-sm text-brand-gray break-words min-w-[150px]">
                                                                {record.payment === 'POUKAZ' && <span className="inline-block bg-purple-50 border border-purple-200 px-2 py-0.5 rounded text-purple-800 font-bold mb-1">Poukaz: {record.voucherCode}</span>}
                                                                <div>{record.notes}</div>
                                                            </td>
                                                            <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                                                <div className="flex justify-end gap-2">
                                                                    <button onClick={() => openEditModal(record)} className="text-brand-dark hover:text-brand-gold bg-brand-light border border-gray-200 px-3 py-1.5 rounded transition-colors shadow-sm font-semibold">Upravit</button>
                                                                    {isAdmin && (
                                                                        <button onClick={() => handleDelete(record.id)} className="text-red-700 hover:text-red-900 bg-red-50 hover:bg-red-100 border border-red-200 px-3 py-1.5 rounded transition-colors shadow-sm font-semibold">Smazat</button>
                                                                    )}
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    ))
                                                )}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div className="w-full lg:w-80 flex flex-col gap-4">
                                    <div className="bg-brand-dark rounded-xl shadow-xl border border-brand-brown overflow-hidden text-brand-light sticky top-6">
                                        <div className="p-5 bg-brand-brown border-b border-brand-brown flex justify-between items-center">
                                            <h3 className="font-bold text-lg text-white">Souhrn mƒõs√≠ce</h3>
                                            <span className="bg-brand-dark px-2 py-1 rounded text-xs font-mono text-brand-gold">{selectedMonth}</span>
                                        </div>
                                        <div className="p-6">
                                            <div className="mb-6 bg-brand-brown/50 p-4 rounded-lg border border-brand-brown">
                                                <p className="text-brand-gray text-sm mb-1 uppercase tracking-wider font-semibold">Celkov√° tr≈æba</p>
                                                <p className="text-4xl font-bold text-brand-gold">{totals.total.toLocaleString()} <span className="text-xl opacity-70">Kƒç</span></p>
                                            </div>
                                            <div className="space-y-4">
                                                <div className="flex justify-between items-center pb-3 border-b border-brand-brown"><span className="flex items-center gap-3 font-medium"><span className="w-3 h-3 rounded-full bg-red-400"></span> Hotovost</span><span className="font-bold text-lg text-white">{totals.cash.toLocaleString()} Kƒç</span></div>
                                                <div className="flex justify-between items-center pb-3 border-b border-brand-brown"><span className="flex items-center gap-3 font-medium"><span className="w-3 h-3 rounded-full bg-green-400"></span> QR platby</span><span className="font-bold text-lg text-white">{totals.qr.toLocaleString()} Kƒç</span></div>
                                                <div className="flex justify-between items-center pb-3 border-b border-brand-brown"><span className="flex items-center gap-3 font-medium"><span className="w-3 h-3 rounded-full bg-purple-400"></span> Poukazy</span><span className="font-bold text-lg text-white">{totals.voucher.toLocaleString()} Kƒç</span></div>
                                                <div className="flex justify-between items-center pt-2"><span className="text-brand-gray font-medium">Poƒçet slu≈æeb celkem</span><span className="font-bold text-xl bg-brand-gold text-brand-dark px-3 py-1 rounded-md">{totals.count}</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    {isModalOpen && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-brand-dark/80 backdrop-blur-sm transition-opacity">
                            <div className="bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden transform transition-all">
                                <div className="bg-brand-dark text-white px-6 py-5 flex justify-between items-center">
                                    <h3 className="text-xl font-bold flex items-center gap-2"><span>‚úÇÔ∏è</span> {editingId ? 'Upravit z√°kazn√≠ka' : 'Nov√Ω z√°kazn√≠k'}</h3>
                                    <button onClick={closeModal} className="text-brand-gray hover:text-brand-gold text-3xl leading-none">&times;</button>
                                </div>
                                <form onSubmit={handleSaveRecord} className="p-6 space-y-5">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div><label className="block text-sm font-bold text-brand-brown mb-1">Datum *</label><input required type="date" value={formData.date} onChange={e => setFormData({...formData, date: e.target.value})} className="w-full border-gray-300 rounded-md shadow-sm focus:ring-brand-gold focus:border-brand-gold py-2 px-3 border" /></div>
                                        <div><label className="block text-sm font-bold text-brand-brown mb-1">ƒåas *</label><input required type="time" value={formData.time} onChange={e => setFormData({...formData, time: e.target.value})} className="w-full border-gray-300 rounded-md shadow-sm focus:ring-brand-gold focus:border-brand-gold py-2 px-3 border" /></div>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-bold text-brand-brown mb-1">Kade≈ôn√≠k</label>
                                        <select value={formData.barber} onChange={e => setFormData({...formData, barber: e.target.value})} className="w-full border-gray-300 rounded-md shadow-sm focus:ring-brand-gold focus:border-brand-gold py-2 px-3 bg-brand-light border">
                                            <option>Kade≈ôn√≠k 1</option><option>Kade≈ôn√≠k 2</option><option>Admin (Majitel)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-bold text-brand-brown mb-1">Slu≈æba *</label>
                                        <select value={formData.service} onChange={handleServiceChange} className="w-full border-gray-300 rounded-md shadow-sm focus:ring-brand-gold focus:border-brand-gold py-2 px-3 font-medium border">
                                            {SERVICES.map(s => <option key={s.name} value={s.name}>{s.name} ({s.price} Kƒç)</option>)}
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-bold text-brand-brown mb-2">Metoda platby *</label>
                                        <div className="flex bg-brand-light p-1.5 rounded-lg border border-gray-200">
                                            {PAYMENTS.map(pay => (
                                                <button key={pay} type="button" onClick={() => setFormData({...formData, payment: pay, voucherCode: ''})} className={`flex-1 py-2 text-sm font-bold rounded-md transition-all ${formData.payment === pay ? 'bg-white shadow-md text-brand-gold border border-gray-200' : 'text-brand-gray hover:text-brand-dark'}`}>{pay}</button>
                                            ))}
                                        </div>
                                    </div>
                                    {formData.payment === 'POUKAZ' && (
                                        <div className="bg-purple-50 p-4 rounded-xl border border-purple-200 shadow-inner animate-fade-in">
                                            <label className="block text-sm font-bold text-purple-900 mb-2">ƒå√≠slo poukazu (Vouch√©ru) *</label>
                                            <input required type="text" placeholder="Nap≈ô. 15, 24, VCH-123" value={formData.voucherCode} onChange={e => setFormData({...formData, voucherCode: e.target.value})} className="w-full border-purple-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 bg-white py-2 px-3 text-lg font-mono placeholder-purple-200 border" />
                                        </div>
                                    )}
                                    <div>
                                        <label className="block text-sm font-bold text-brand-brown mb-1">Pozn√°mky</label>
                                        <input type="text" value={formData.notes} onChange={e => setFormData({...formData, notes: e.target.value})} placeholder="Voliteln√° pozn√°mka..." className="w-full border-gray-300 rounded-md shadow-sm focus:ring-brand-gold focus:border-brand-gold py-2 px-3 border" />
                                    </div>
                                    <div className="pt-6 flex gap-3 border-t border-gray-100">
                                        <button type="button" onClick={closeModal} className="flex-1 px-4 py-3 border border-gray-300 text-brand-dark rounded-lg hover:bg-brand-light font-bold transition-colors">Zru≈°it</button>
                                        <button type="submit" className="flex-1 px-4 py-3 bg-brand-gold text-white rounded-lg hover:opacity-90 font-bold shadow-md transition-all">{editingId ? 'Ulo≈æit √∫pravy' : 'Ulo≈æit z√°znam'}</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
